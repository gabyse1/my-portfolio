{"version":3,"file":"app.js","names":["_dotenv","_interopRequireDefault","require","_express","_bodyParser","_morgan","_cors","_path","_secureurl","_user","_tool","_project","_mail","obj","__esModule","process","env","NODE_ENV","dotenv","config","app","express","set","PORT","use","morgan","bodyParser","urlencoded","extended","json","cors","origin","concat","path","join","__dirname","secureurlRouter","toolRouter","projectRouter","userRouter","mailRouter","get","req","res","sendFile","error","code","keyValue","customError","Error","Object","keys","status","send","message","listen","console","log"],"sources":["../src/app.js"],"sourcesContent":["import dotenv from 'dotenv';\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport morgan from 'morgan';\nimport cors from 'cors';\nimport path from 'path';\nimport './database';\nimport secureurlRouter from './routes/secureurl.router';\nimport userRouter from './routes/user.router';\nimport toolRouter from './routes/tool.router';\nimport projectRouter from './routes/project.router';\nimport mailRouter from './routes/mail.router';\n\n// set environment\nif (process.env.NODE_ENV !== 'production') dotenv.config();\n\n// initialization\nconst app = express();\n\n// settings\napp.set('port', process.env.PORT || 5000);\n\n// middlewares\napp.use(morgan('tiny'));\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json());\napp.use(cors({ origin: `http://localhost:${process.env.PORT || 3000}` }));\n\n// Serve static files from the React app\napp.use(express.static(path.join(__dirname, '../client/build')));\n\n// routes\napp.use('/api/s3', secureurlRouter);\napp.use('/api/tools', toolRouter);\napp.use('/api/projects', projectRouter);\napp.use('/api/users', userRouter);\napp.use('/api/mail', mailRouter);\n\n// The \"catchall\" handler: for any request that doesn't\n// match one above, send back React's index.html file.\napp.get('*', (req, res) => {\n  res.sendFile(path.join(__dirname, '../client/build/index.html'));\n});\n\n// error handler\napp.use((error, req, res) => {\n  const { code, keyValue } = error;\n  if (code === 11000) {\n    const customError = new Error(`This ${Object.keys(keyValue)[0]} is already in use`);\n    return res.status(409).send({ message: customError.message });\n  }\n  return res.status(500).send({ message: error.message });\n});\n\n// start server\napp.listen(app.get('port'), () => {\n  console.log(`Server listening on port ${app.get('port')}`);\n});\n"],"mappings":"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"}